## 文件系统

### Linux文件系统

Linux 文件系统（Filesystem）是 Linux 操作系统中用于组织、存储和管理数据的结构。它采用分层目录结构（树形结构），支持多种文件系统类型，如 **ext4、XFS、Btrfs** 等。以下是 Linux 文件系统的核心概念和主要内容。

---

#### 1. Linux 文件系统的核心概念
##### 1.1  目录结构（FHS 标准）
Linux 采用 **树状目录结构**，所有文件和目录都挂载在 **根目录 `/`** 之下。常见的目录包括：
- **`/`**：根目录，所有文件和目录的起点。
- **`/bin`**：存放基本的用户可执行程序，如 `ls`、`cp` 等。
- **`/sbin`**：存放系统管理命令，如 `fdisk`、`reboot` 等。
- **`/home`**：普通用户的主目录，如 `/home/user`。
- **`/root`**：root 用户的主目录。
- **`/etc`**：系统配置文件存放目录，如 `/etc/passwd`。
- **`/var`**：存放日志和动态数据，如 `/var/log`。
- **`/dev`**：存放设备文件，如 `/dev/sda`（硬盘）、`/dev/null`。
- **`/mnt` & `/media`**：临时挂载点，如 U 盘、光盘。
- **`/proc` & `/sys`**：内核和系统信息的虚拟文件系统。

---

#### 2. Linux 的文件系统类型
Linux 支持多种文件系统格式：
- **ext4（Extended Filesystem 4）**：默认的 Linux 文件系统，支持大文件、日志、快照等。
- **XFS**：高性能日志文件系统，适用于大规模存储。
- **Btrfs（B-tree FS）**：支持快照、压缩、RAID，适用于高级存储需求。
- **FAT32/exFAT/NTFS**：用于跨平台兼容（Windows/macOS）。
- **tmpfs**：基于 RAM 的临时文件系统，加速访问速度（如 `/tmp`）。
- **NFS（Network File System）**：用于网络文件共享。

---

#### 3. 文件系统的挂载和卸载
在 Linux 中，所有的存储设备（如硬盘、U 盘、光盘、网络存储等）都必须挂载到某个目录（挂载点）才能被访问。挂载（mount）和卸载（umount）是 Linux 文件系统管理的重要操作。

![FS](../images/文件系统结构.svg)


#### 4. 设备文件与 `proc`、`sys` 伪文件系统
- **`/dev` 目录**：设备文件，如 `/dev/sda`（磁盘）、`/dev/tty`（终端）。
- **`/proc` 文件系统**：内核信息，如 `/proc/cpuinfo`（CPU 信息）。
- **`/sys` 文件系统**：用于配置内核，如 `/sys/class/net/eth0/`。

---

### 与Windows文件系统相比

Windows 文件系统和 Linux 文件系统在**结构、兼容性、权限管理、文件存储方式**等方面存在显著区别。下面是主要区别的简要总结。

---

#### **1. 常见的文件系统类型**
| 操作系统 | 常见文件系统 |
|----------|------------|
| **Windows** | FAT32、exFAT、NTFS |
| **Linux** | ext4、XFS、Btrfs、F2FS、ZFS |

- **Windows** 主要使用 **NTFS**，支持权限管理、加密、压缩等。
- **Linux** 主要使用 **ext4**，支持日志、软/硬链接、快照等。

---

#### **2. 文件存储与碎片整理**
##### **Windows（NTFS）**
- 采用 **B+ 树结构** 管理文件索引。
- 长时间使用后容易产生 **文件碎片**，需要 **磁盘整理（defrag）**。

### **Linux（ext4, XFS, Btrfs）**
- 采用 **inode 结构** 管理文件索引。
- **自动优化存储位置**，碎片较少，不需要磁盘整理。

---

#### **3. 挂载方式**
##### **Windows**
- 盘符（C:\、D:\）自动分配。
- U 盘、移动硬盘自动挂载。

##### **Linux**
- 需要手动挂载（`mount` 命令）或设置自动挂载（`/etc/fstab`）。
- 例如：
  ```bash
  mount /dev/sdb1 /mnt/usb
  ```

---

#### **4. 兼容性**
| **操作系统** | **是否支持 NTFS** | **是否支持 ext4** |
|-------------|----------------|----------------|
| **Windows** | 原生支持 | 需要第三方软件（Ext2Fsd） |
| **Linux** | 需要 `ntfs-3g` 驱动 | 原生支持 |

---

### **总结**
| **比较项** | **Windows（NTFS）** | **Linux（ext4）** |
|------------|----------------|----------------|
| **目录结构** | 盘符（C:\ D:\） | 统一根目录 `/` |
| **权限管理** | ACL 权限 | rwx + 组权限 |
| **文件命名** | 不区分大小写 | 区分大小写 |
| **文件碎片** | 需要整理 | 自动优化，几乎无碎片 |
| **挂载方式** | 自动挂载 | 需手动挂载或 `/etc/fstab` |
| **兼容性** | Windows 仅支持 NTFS | Linux 可读写 NTFS，但 Windows 不支持 ext4 |